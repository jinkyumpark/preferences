(function(){return function(e,r,n){var s=[],i=loadHelper("flight_reference.js"),t=loadHelper("airline.js"),a=loadHelper("airlines.js"),o=a.map(function(e){if(!e.blacklisted)return e.IATA}),l=a.map(function(e){return e.ICAO}),c=[].concat.apply([],a.map(function(e){return e.domains})),u=[].concat.apply([],a.map(function(e){return e.names})),d=loadHelper("blacklist_references.js"),m=!!loadHelper("iata_keyword_domains.js").includes(n.domain),g=/[A-Z]{2}|[A-Z][0-9]|[0-9][A-Z]/,p=/[A-Z]{3}/,f="";u.forEach(function(e){f+=e+"|",f+=e+"Flight|"}),f=new RegExp(f.slice(0,-1),"i");var h=/(\n?\n?flight(\n?\n?|\/\s*OPERATED BY)|vuelo(?:\/\s*OPERADO POR)?|\ud3b8\uba85|n\xfamero de vuelo|vuelo \u2116|flug-\snummer|flight[\n\s]?number|vluchtnummer|numero\sdi\svolo|\n?\n?flight\s?\/\soperated[\xa0\s]by\s\n?\n?)\s?#?/i,_=/(^\s[0-9]{1,4}$|^[0-9]{1,4}$)/,x=/(\s|flight|\(|:|-|\.|diretto|direct|\[|\u2022)/i,v=/(\s|\)|,\s?|\n|\/|\*|\u4fbf|\ud3b8|\uff08|\u3011|\(|;)/,w=/(\*\s|\s ?|\s#| ?- ?)?/i,A=/(\*\s|\s\s?\s?|,?\s?\sflight\s|\s-\sflight\s|\s#\s?|\s?\nvuelo\s:?\s?|\s\s?(?:(Op\xe9r\xe9 par|Operated By|Betrieben von):.{1,30}\s+)?(?:\u30d5\u30e9\u30a4\u30c8:|\ud56d\uacf5\ud3b8:|Volo?:|Flight:|Flug:)\s)?/i,E=/[0-9]{1,4}/,O=/(\s+?)(?:[A-Z]{2}|[A-Z][0-9]|[0-9][A-Z])(?:\*\s|\s ?|\s#| ?- ?)?[0-9]{1,4}\/([0-9]{1,4})(\s|\)|,\s?|\n|\/|\*|\u4fbf|\ud3b8|\uff08|\u3011|\(|;)/,b=/(?:PNR(?:\s+?)?(?:is))/,y=[];return[{id:"iata",regex:g,separator_regex:w,whitelist:o,use_domain:!1},{id:"airlineName",regex:f,separator_regex:A,whitelist:u,use_domain:!1},{id:"icao",regex:p,separator_regex:w,whitelist:l,use_domain:!1},{id:"keyword",regex:/(flight(?:\s+?)?(?:number)?|flug|vlucht|vuelo ?|voo(?:\s+?)?|volo|vol):?-?\s?#?/i,separator_regex:A,whitelist:c,use_domain:!0},{id:"keywordColumn",regex:h,separator_regex:A,whitelist:c,use_domain:!0}].forEach(function(e){y.push({id:e.id,scanner_regex:new RegExp(x.source+"("+e.regex.source+")"+e.separator_regex.source+E.source+v.source,"ig"),reference_regex:e.regex,whitelist:e.whitelist,use_domain:e.use_domain})}),y.forEach(function(e){if(!(concatRegExp(b,e.scanner_regex).test(n.plain)||s.length>=1&&!1===m)){var o=[];"keywordColumn"===e.id?o=loadHelper("column_extractor.js")(r,h,_):(o=r.content_.match(e.scanner_regex),r.content_.match(O)&&o.push(...r.content_.match(O)));var l=r.getSpan();o&&o.length>=1&&o.forEach(function(o){var c=o.trim();if(o.match(O)&&(c=c.replace(/[0-9]{1,4}\//g,"")),c=c.replace(/[()\n,\/\uff08\u3011]/g,"").replace(/^-/g,""),!(d.indexOf(c)>-1)){var u="";if(!0===e.use_domain?u="webpage"===n.documentType||n.from.indexOf("safari")>-1?n.senderDomain.toLowerCase():n.from.toLowerCase():(u=e.reference_regex.exec(c))&&u[0]&&(u=u[0].toLowerCase()),e.whitelist.toString().toLowerCase().indexOf(u)>-1){var m=/^([0-9]+)$/;c.match(m)||(m=/.{2,}?([\d]{1,4})\b/);var g=c.match(m),p=loadHelper("skip_for_domain.js")[n.senderDomain];p&&p.test(r.getSpan())&&(l=r.getSpan().next(p),o=o.trim());var f=new i(t.airlineFromReference(u,a),g[1].replace(/^0+/,""),l.next(o),c.toString());(!1===s.some(function(e){if(e.equals(f))return!0})||loadHelper("multiple_flight_number_domain_allowlist.js").includes(n.domain))&&(s.push(f),l=f.span)}}})}}),s}}).call();