new ReverseTemplateList([new ReverseTemplate("rezserver.com-car-en",function(e){return/Your (?:[AC]AA|Travel.com)\s.*?Car (?:Itinerary|Cancellation)/.test(e.subject)},function(e){if(!/Your (?:[AC]AA|Travel.com)\s.*?Car (?:Itinerary|Cancellation)/.test(e.subject))return CONTINUE;var t="en_US",r={reservationIdPrefix:"Confirmation #:",reservationStatusPrefix:"Booking Status:",underNamePrefix:"Driver Name:",providerNamePrefix:"Rental Partner:",carBrandRegExp:/(.+) or similar/,pickUpDetailsPrefix:"Pick-up Details:",dropOffDetailsPrefix:"Drop-Off Details:",modifyReservationUrlPrefix:"Change Your Reservation"},a=Scanner.fromMessage(e);a.setLocale(t);var n,i,o,s,p,g,u,m,c,d=a.getSpan();return n=d.next(r.reservationIdPrefix).nextAnyTag("td").tagContents(),i=d.next(r.reservationStatusPrefix).nextAnyTag("td").tagContents(),o=d.next(r.underNamePrefix).nextAnyTag("td").tagContents(),s=d.next(r.providerNamePrefix).nextAnyTag("td").tagContents(),p=d.next(r.carBrandRegExp).parentAnyTag("td").tagContents().innerCapture(r.carBrandRegExp,1),[g,u]=d.next(r.pickUpDetailsPrefix).nextAnyTag("td").tagContents().toString().split(/\n/),g=a.getDetachedSpan(g),u=a.getDetachedSpan(u),[m,c]=d.next(r.dropOffDetailsPrefix).nextAnyTag("td").tagContents().toString().split(/\n/),m=a.getDetachedSpan(m),c=a.getDetachedSpan(c),d.next(r.modifyReservationUrlPrefix).nextLink(),ASSERT(u||pickUpLocationName,g)?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationStatus:"http://schema.org/Reservation"+i,reservationId:n,underName:{"@type":"http://schema.org/Person",name:o},provider:{"@type":"http://schema.org/Organization",name:s},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:p}},pickupTime:g,pickupLocation:{"@type":"http://schema.org/Place",address:u},dropoffTime:m,dropoffLocation:{"@type":"http://schema.org/Place",address:c}}]:void 0},function(){return{}},"SG1a3f2ab1"),new ReverseTemplate("rezserver.com-flight-confirmation-en",function(e){return/Your (?:[AC]AA|Travel\.com).*?\sFlight Itinerary/.test(e.subject)},function(e){if(!/Your (?:[AC]AA|Travel\.com).*?\sFlight Itinerary/.test(e.subject))return CONTINUE;var t="en_US",r={reservationIdPrefix:"Airline Confirmation:",reservationStatusPrefix:"Booking Status:",flightsHeaderRegExp:/Your Trip from .+ to .+/,legsHeaderRegExp:/(?:(?:Departing|Returning) )?Flight:/,hasMoreLegsRegExp:/Connection at .+ \([A-Z]{3}\)/,airlineNameRegExp:/(.+?)(?:\s?\(.+?\))?\s-/,flightNumberRegExp:/Flight\s(\d+)/,passengerNameSuffix:"Passenger and Ticket Information",passengerNameRegExp:/(.+) - Passenger and Ticket Information/,ticketNumberRegExp:/Ticket number: (\d+)/},a=Scanner.fromMessage(e);a.setLocale(t);for(var n=a.getSpan(),i=[],o=[],s=[],p=n.next(r.reservationIdPrefix).nextAnyTag("td").tagContents(),g=n.next(r.reservationStatusPrefix).nextAnyTag("td").tagContents(),u=n.next(r.flightsHeaderRegExp).next(r.legsHeaderRegExp);u.exists();){var m=u.parentAnyTag("td").tagContents().innerDate(),c=!1;do{var d=(u=u.nextTag("table3")).allInnerTags("td3").map(function(e){return e.tagContents()}).filter(function(e){return e.toString().length>0});if(d&&d.length){var l=a.getDetachedSpan(m+" "+d[1]),x=a.getDetachedSpan(m+" "+d[6]);i.push({airlineName:d[9].innerCapture(r.airlineNameRegExp,1),flightNumber:d[9].innerCapture(r.flightNumberRegExp,1),departureAirport:d[2],departureAirportCode:d[3],departureDateTime:l,arrivalAirport:d[7],arrivalAirportCode:d[8],arrivalDateTime:x})}(c=u.next(r.hasMoreLegsRegExp).exists())&&(u=u.next(r.hasMoreLegsRegExp))}while(c);u=u.next(r.legsHeaderRegExp)}for(u=n.next(r.passengerNameSuffix);u.exists();)o.push({name:u.parentAnyTag("td").tagContents().innerCapture(r.passengerNameRegExp,1),ticketNumber:u.nextAnyTag("td").tagContents().innerCapture(r.ticketNumberRegExp,1)}),u=u.next(r.passengerNameSuffix);return 0===o.length&&o.push({}),i.forEach(function(e){o.forEach(function(t){ASSERT(e.airlineCode||e.airlineName,e.flightNumber,e.departureAirport,e.departureDateTime),s.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:e.airlineCode,airlineName:e.airlineName,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:t.name},reservationId:p,reservationStatus:"http://schema.org/Reservation"+g,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:t.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:t.seat,seatingType:null}}})})}),s},function(){return{}},"SG63b68910")]);