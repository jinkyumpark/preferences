{"version":"21.0.69","logLevel":"default","pipelineGroups":[{"name":"Podcasts Group Pipelines","description":"pipelines to generate the \"account\" and \"buyResult\" events for Podcasts","groupConfig":{"app":"com.apple.podcasts","eventVersion":1,"topic":"xp_amp_podcasts_main","namespace":"podcasts","disableReportBagKey":"podcastsEventsEnabled"},"onSync":[{"name":"Account sync pipeline","queries":{"disableRecording":{"type":"dynamic","action":{"kind":"readFromBag","key":"$groupConfig.disableReportBagKey","type":"boolean"},"defaultValue":{"type":"boolean","value":true}},"needPrivacyConsent":{"type":"dynamic","action":{"kind":"privacyAcknowledgement","privacyIdentifier":"com.apple.onboarding.podcasts"},"defaultValue":{"type":"boolean","value":false}}},"actions":[{"kind":"dropEvent","predicate":{"kind":"match","lhsValue":"$queries.needPrivacyConsent","rhsValue":true}},{"kind":"generateEvent","predicate":{"kind":"match","lhsValue":"$queries.disableRecording","rhsValue":false},"eventType":"account","fields":{"eventVersion":"$groupConfig.eventVersion","app":"$groupConfig.app","topic":"$groupConfig.topic"},"mediaType":"podcast","clientIdConfig":{"namespace":"$groupConfig.namespace","key":"clientId","crossDeviceSync":false},"userIdConfig":{"namespace":"$groupConfig.namespace","key":"userId","crossDeviceSync":true},"addCommonFieldsAction":{"kind":"addCommonFields","optionalFields":{"buildFlavor":true}}},{"kind":"enqueueEvent","topic":"$groupConfig.topic"},{"kind":"flushEvents"}]}],"pipelines":[{"name":"buyResult pipeline","description":"Pipeline for generating the buyResult events based on the purchase events","filter":{"app":"com.apple.podcasts","eventType":"purchase"},"queries":{"disableRecording":{"type":"dynamic","action":{"kind":"readFromBag","key":"$groupConfig.disableReportBagKey","type":"boolean"},"defaultValue":{"type":"boolean","value":true}},"needPrivacyConsent":{"type":"dynamic","action":{"kind":"privacyAcknowledgement","privacyIdentifier":"com.apple.onboarding.podcasts"},"defaultValue":{"type":"boolean","value":false}}},"actions":[{"kind":"dropEvent","predicate":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.disableRecording","rhsValue":true},{"kind":"match","lhsValue":"$queries.needPrivacyConsent","rhsValue":true},{"kind":"isNothing","value":"$event.buyParameters"},{"kind":"match","lhsValue":"$event.buyParameters.cancelSubscription","rhsValue":true}]}},{"kind":"addCommonFields","optionalFields":{"buildFlavor":true}},{"kind":"addField","key":"eventType","valueType":"string","value":"buyResult"},{"kind":"addField","key":"topic","valueType":"string","value":"$groupConfig.topic"},{"kind":"addField","key":"app","valueType":"string","value":"com.apple.podcasts"},{"kind":"addField","key":"eventVersion","valueType":"number","value":"$groupConfig.eventVersion"},{"kind":"addField","key":"productTypes","valueType":"array","value":"$event.buyParameters.productType"},{"kind":"addField","key":"itemIds","valueType":"array","value":"$event.buyParameters.salableAdamId"},{"kind":"conditional","ifPredicate":{"kind":"and","conditions":[{"kind":"isSome","value":"$event.responseDictionary"},{"kind":"isSome","value":"$event.responseDictionary.jingleDocType"}]},"thenAction":{"kind":"addField","key":"resultType","valueType":"string","value":"$event.responseDictionary.jingleDocType"},"elseAction":{"kind":"addField","key":"resultType","valueType":"string","value":"failure"}},{"kind":"lintEvent","rules":[{"kind":"userId","fields":["clientId"],"key":"clientId","namespace":"$groupConfig.namespace","crossDeviceSync":false},{"kind":"userId","fields":["userId"],"key":"userId","namespace":"$groupConfig.namespace","crossDeviceSync":true},{"kind":"allowFields","fields":["app","appVersion","topic","eventTime","baseVersion","entitlementOriginType","eventType","eventVersion","itemIds","isAnonymous","hardwareModel","hardwareFamily","isSignedIn","os","osVersion","osBuildNumber","userAgent","storeFrontHeader","productTypes","resultType","clientId","userId","resourceRevNum","timezoneOffset","xpSendMethod","buildFlavor"]}]},{"kind":"enqueueEvent","topic":"$groupConfig.topic"}]}]},{"name":"AppStore buyResult Pipelines","description":"Pipelines for generating AppStore `buyResult` events","groupConfig":{"topic":"xp_amp_appstore","namespace":"appstore_clickstream_eval"},"pipelines":[{"name":"buyResult Pipeline","description":"Pipeline for generating `buyResult` events based on AppStore purchase events","filter":{"app":"^com.apple.AppStore$|^com.apple.appstored$|^com.apple.storekitd$|^com.apple.appstoreagent$|^com.apple.storekitagent$","eventType":"purchase"},"queries":{"iTunesAccount":{"type":"dynamic","action":{"kind":"accountStore","type":"iTunes"}},"metricsBag":{"type":"dynamic","action":{"kind":"readFromBag","key":"metrics","type":"dictionary"}}},"actions":[{"kind":"dropEvent","predicate":{"kind":"or","conditions":[{"kind":"isNothing","value":"$queries.metricsBag"},{"kind":"isNothing","value":"$queries.metricsBag.featureFlags"},{"kind":"isNothing","value":"$queries.metricsBag.featureFlags.appStoreIsBuyResultEnabled"},{"kind":"match","lhsValue":"$queries.metricsBag.featureFlags.appStoreIsBuyResultEnabled","rhsValue":false}]}},{"kind":"conditional","ifPredicate":{"kind":"or","conditions":[{"kind":"isSome","value":"$event.error"},{"kind":"match","lhsValue":"$event.success","rhsValue":false}]},"thenAction":{"kind":"compound","actions":[{"kind":"addCommonFields"},{"kind":"addField","key":"eventType","valueType":"string","value":"buyResult"},{"kind":"addField","key":"app","valueType":"string","value":"$event.app"},{"kind":"addField","key":"hostApp","valueType":"string","value":"$event.buyParameters.mtHostApp","predicate":{"kind":"isSome","value":"$event.buyParameters.mtHostApp"}},{"kind":"addField","key":"dsId","valueType":"string","value":"$queries.iTunesAccount.dsid","predicate":{"kind":"isSome","value":"$queries.iTunesAccount"}},{"kind":"addField","key":"eventTime","valueType":"string","value":"$event.eventTime"},{"kind":"addField","key":"topic","valueType":"string","value":"$groupConfig.topic"},{"kind":"addField","key":"userNs","valueType":"string","value":"$groupConfig.namespace"},{"kind":"addField","key":"resultType","valueType":"number","value":1},{"kind":"addField","key":"pageContext","valueType":"string","value":"$event.buyParameters.mtPageContext","predicate":{"kind":"isSome","value":"$event.buyParameters.mtPageContext"}},{"kind":"addField","key":"pageId","valueType":"string","value":"$event.buyParameters.mtPageId","predicate":{"kind":"isSome","value":"$event.buyParameters.mtPageId"}},{"kind":"addField","key":"pageType","valueType":"string","value":"$event.buyParameters.mtPageType","predicate":{"kind":"isSome","value":"$event.buyParameters.mtPageType"}},{"kind":"addField","key":"clientId","valueType":"string","value":"$event.buyParameters.mtClientId","predicate":{"kind":"isSome","value":"$event.buyParameters.mtClientId"}},{"kind":"lintEvent","rules":[{"kind":"userId","fields":["userId"],"key":"userId","namespace":"$groupConfig.namespace","crossDeviceSync":true},{"kind":"allowFields","fields":["eventType","app","appAdamIds","clientId","dsId","userId","userNs","xpUserIdSyncState","eventTime","hostApp","pageContext","pageId","pageType","postTime","timezoneOffset","userAgent","topic","storeFrontHeader","flowStep","flowType","itemIds","resultType","totalAmountPaid","channelLinkService","channelTransactionService","sapTypes","price","priceType","buyInfoPrice","xpAccountsMatch","osBuildNumber","resourceRevNum","currency"]}]},{"kind":"enqueueEvent","topic":"$groupConfig.topic","personalized":true}]},"elseAction":{"kind":"compound","actions":[{"kind":"dropEvent","predicate":{"kind":"or","conditions":[{"kind":"isNothing","value":"$event.responseDictionary"},{"kind":"isNothing","value":"$event.responseDictionary.metrics"},{"kind":"isAppStoreAppAutoUpdate"}]}},{"kind":"addCommonFields"},{"kind":"addField","key":"eventType","valueType":"string","value":"buyResult"},{"kind":"addField","key":"app","valueType":"string","value":"$event.app"},{"kind":"addField","key":"hostApp","valueType":"string","value":"$event.buyParameters.mtHostApp","predicate":{"kind":"isSome","value":"$event.buyParameters.mtHostApp"}},{"kind":"addField","key":"dsId","valueType":"string","value":"$queries.iTunesAccount.dsid","predicate":{"kind":"isSome","value":"$queries.iTunesAccount"}},{"kind":"addField","key":"eventTime","valueType":"string","value":"$event.eventTime"},{"kind":"addField","key":"topic","valueType":"string","value":"$groupConfig.topic"},{"kind":"addField","key":"userNs","valueType":"string","value":"$groupConfig.namespace"},{"kind":"addField","key":"appAdamIds","valueType":"array","value":"$event.buyParameters.appAdamId","predicate":{"kind":"isSome","value":"$event.buyParameters.appAdamId"}},{"kind":"conditional","ifPredicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.mtPageContext"},"thenAction":{"kind":"addField","key":"pageContext","valueType":"string","value":"$event.responseDictionary.metrics.mtPageContext"},"elseAction":{"kind":"addField","key":"pageContext","valueType":"string","value":"$event.buyParameters.mtPageContext","predicate":{"kind":"isSome","value":"$event.buyParameters.mtPageContext"}}},{"kind":"addField","key":"pageId","valueType":"string","value":"$event.responseDictionary.metrics.mtPageId","predicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.mtPageId"}},{"kind":"addField","key":"pageType","valueType":"string","value":"$event.responseDictionary.metrics.mtPageType","predicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.mtPageType"}},{"kind":"addField","key":"flowStep","valueType":"number","value":"$event.responseDictionary.metrics.commerceEvent_flowStep"},{"kind":"addField","key":"flowType","valueType":"number","value":"$event.responseDictionary.metrics.commerceEvent_flowType"},{"kind":"addField","key":"itemIds","valueType":"array","value":"$event.responseDictionary.metrics.itemIds"},{"kind":"addField","key":"resultType","valueType":"number","value":"$event.responseDictionary.metrics.commerceEvent_result_resultType"},{"kind":"addField","key":"totalAmountPaid","valueType":"number","value":"$event.responseDictionary.metrics.extractedCommerceEvent_latestLineItem_amountPaid"},{"kind":"addField","key":"channelLinkService","valueType":"string","value":"$event.responseDictionary.metrics.commerceEvent_channelLink_service","predicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.commerceEvent_channelLink_service"}},{"kind":"addField","key":"channelTransactionService","valueType":"string","value":"$event.responseDictionary.metrics.commerceEvent_channelTransaction_service","predicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.commerceEvent_channelTransaction_service"}},{"kind":"conditional","ifPredicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.sapTypes"},"thenAction":{"kind":"addField","key":"sapTypes","valueType":"array","value":"$event.responseDictionary.metrics.sapTypes"},"elseAction":{"kind":"addField","key":"sapTypes","valueType":"array","value":"$event.responseDictionary.metrics.extractedCommerceEvent_latestLineItem_sapType"}},{"kind":"addField","key":"priceType","valueType":"string","value":"$event.responseDictionary.metrics.commerceEvent_purchase_priceType"},{"kind":"conditional","ifPredicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.mtClientId"},"thenAction":{"kind":"addField","key":"clientId","valueType":"string","value":"$event.responseDictionary.metrics.mtClientId"},"elseAction":{"kind":"addField","key":"clientId","valueType":"string","value":"$event.buyParameters.mtClientId","predicate":{"kind":"isSome","value":"$event.buyParameters.mtClientId"}}},{"kind":"addField","key":"currency","valueType":"string","value":"$event.responseDictionary.metrics.currency","predicate":{"kind":"isSome","value":"$event.responseDictionary.metrics.currency"}},{"kind":"lintEvent","rules":[{"kind":"userId","fields":["userId"],"key":"userId","namespace":"$groupConfig.namespace","crossDeviceSync":true},{"kind":"allowFields","fields":["eventType","app","appAdamIds","clientId","dsId","userId","userNs","xpUserIdSyncState","eventTime","hostApp","pageContext","pageId","pageType","postTime","timezoneOffset","userAgent","topic","storeFrontHeader","flowStep","flowType","itemIds","resultType","totalAmountPaid","channelLinkService","channelTransactionService","sapTypes","price","priceType","buyInfoPrice","xpAccountsMatch","osBuildNumber","resourceRevNum","currency"]}]},{"kind":"enqueueEvent","topic":"$groupConfig.topic","personalized":true,"account":"$queries.iTunesAccount"}]}}]}]},{"name":"Music Voice Search PAF Pipelines","description":"Pipelines for creating Voice Search PAF events from Music EVS data","groupConfig":{"enqueueTopic":"xp_amp_music_siri_play","bagNamespace":"voice_search_paf","inactivityTimeoutBagKey":"inactivityTimeout"},"pipelines":[{"name":"EVS Session Processor","description":"Pipeline for setting session-related database fields","filter":{"event-type":"(item-resume)|(item-end)|(item-pause)|(item-position-jump)|(remote-control-begin)|(application-termination)"},"queries":{"enqueueEventFlag":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"enqueueEventFlag"},"defaultValue":{"type":"number","value":0}},"lastRemoteControlType":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastRemoteControlType"},"defaultValue":{"type":"number","value":999}},"lastItemStartPosition":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastItemStartPosition"},"defaultValue":{"type":"number","value":0}},"lastQueueItemId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastQueueItemId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"isSongPlaying":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"isSongPlaying"},"defaultValue":{"type":"number","value":0}},"sessionId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"sessionId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"lastSearchQueryId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastSearchQueryId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"lastEventTime":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastEventTime"},"defaultValue":{"type":"number","value":0}},"newSessionId":{"type":"dynamic","action":{"kind":"idGenerator"}},"wasSearchQueryIdProcessed":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"wasSearchQueryIdProcessed"},"defaultValue":{"type":"number","value":0}},"wasLastPlaySiriInitiated":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"wasLastPlaySiriInitiated"},"defaultValue":{"type":"number","value":0}},"lastItemTotalPlayDuration":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastItemTotalPlayDuration"},"defaultValue":{"type":"number","value":0}},"inactivityTimeout":{"type":"dynamic","action":{"kind":"readFromBag","key":"$groupConfig.inactivityTimeoutBagKey","type":"integer"},"defaultValue":{"type":"number","value":1800000}},"siriABTreatmentData":{"type":"dynamic","action":{"kind":"readTreatmentByAreaId","areaId":"L3TIy7c"},"defaultValue":{"type":"string","value":"None"}}},"actions":[{"kind":"convertDate","key":"event-time","value":"$event.time","targetValueType":"number"},{"kind":"writeToDatabase","key":"enqueueEventFlag","valueType":"number","value":0},{"kind":"conditional","ifPredicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"isSome","value":"$event.related-events.queue-add.payload.queue-reporting-metadata.siri-ref-id"},{"kind":"match","lhsValue":"$queries.wasSearchQueryIdProcessed","rhsValue":0}]},"thenAction":{"kind":"compound","actions":[{"kind":"compound","predicate":{"kind":"or","conditions":[{"kind":"and","conditions":[{"kind":"greaterThan","lhsValue":"$queries.lastItemTotalPlayDuration","rhsValue":30},{"kind":"notMatch","lhsValue":"$queries.lastQueueItemId","rhsValue":"$event.payload.queue-item-id"},{"kind":"match","lhsValue":"$queries.wasLastPlaySiriInitiated","rhsValue":1}]},{"kind":"match","lhsValue":"$queries.wasLastPlaySiriInitiated","rhsValue":0},{"kind":"match","lhsValue":"$queries.sessionId","rhsValue":"Invalid ID"},{"kind":"greaterThanOrEqual","lhsValue":"$event.event-time","rhsValue":"$queries.lastEventTime","delta":"$queries.inactivityTimeout"}]},"actions":[{"kind":"writeToDatabase","key":"lastRemoteControlType","valueType":"number","value":999},{"kind":"writeToDatabase","key":"lastItemStartPosition","valueType":"number","value":0},{"kind":"writeToDatabase","key":"lastQueueItemId","valueType":"string","value":"Invalid ID"},{"kind":"writeToDatabase","key":"sessionId","valueType":"string","value":"Invalid ID"},{"kind":"writeToDatabase","key":"lastItemTotalPlayDuration","valueType":"number","value":0},{"kind":"writeToDatabase","key":"sessionId","valueType":"string","value":"$queries.newSessionId"}]},{"kind":"writeToDatabase","key":"wasLastPlaySiriInitiated","valueType":"number","value":1},{"kind":"writeToDatabase","key":"enqueueEventFlag","valueType":"number","value":1}]},"elseAction":{"kind":"compound","actions":[{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"notMatch","lhsValue":"$queries.sessionId","rhsValue":"Invalid ID"},{"kind":"greaterThanOrEqual","lhsValue":"$event.event-time","rhsValue":"$queries.lastEventTime","delta":"$queries.inactivityTimeout"},{"kind":"notMatch","lhsValue":"$queries.isSongPlaying","rhsValue":1}]},"actions":[{"kind":"writeToDatabase","key":"lastRemoteControlType","valueType":"number","value":999},{"kind":"writeToDatabase","key":"lastItemStartPosition","valueType":"number","value":0},{"kind":"writeToDatabase","key":"lastQueueItemId","valueType":"string","value":"Invalid ID"},{"kind":"writeToDatabase","key":"sessionId","valueType":"string","value":"Invalid ID"},{"kind":"writeToDatabase","key":"lastItemTotalPlayDuration","valueType":"number","value":0}]},{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"notMatch","lhsValue":"$queries.sessionId","rhsValue":"Invalid ID"},{"kind":"lessThan","lhsValue":"$event.event-time","rhsValue":"$queries.lastEventTime","delta":"$queries.inactivityTimeout"}]},"actions":[{"kind":"writeToDatabase","predicate":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},{"kind":"and","conditions":[{"kind":"notMatch","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"notMatch","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.lastQueueItemId","rhsValue":"$event.payload.queue-item-id"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4}]},{"kind":"match","lhsValue":"$queries.isSongPlaying","rhsValue":1}]}]},"key":"enqueueEventFlag","valueType":"number","value":1},{"kind":"writeToDatabase","predicate":{"kind":"or","conditions":[{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4},{"kind":"or","conditions":[{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-subtype","rhsValue":0},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-subtype","rhsValue":2}]}]},{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4},{"kind":"lessThanOrEqual","lhsValue":"$event.payload.item-end-position","rhsValue":"$queries.lastItemStartPosition","delta":0.3},{"kind":"match","lhsValue":"$event.payload.queue-item-id","rhsValue":"$queries.lastQueueItemId"}]}]},"key":"enqueueEventFlag","value":0,"valueType":"number"}]},{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"notMatch","lhsValue":"$queries.lastQueueItemId","rhsValue":"$event.payload.queue-item-id"}]},"actions":[{"kind":"writeToDatabase","key":"wasLastPlaySiriInitiated","valueType":"number","value":0},{"kind":"writeToDatabase","key":"lastItemTotalPlayDuration","valueType":"number","value":0}]},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$groupConfig.debugEnabled","rhsValue":true},"actions":[{"kind":"writeToDatabase","predicate":{"kind":"match","lhsValue":"$queries.sessionId","rhsValue":"Invalid ID"},"key":"sessionId","valueType":"string","value":"$queries.newSessionId"},{"kind":"writeToDatabase","predicate":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},{"kind":"and","conditions":[{"kind":"notMatch","lhsValue":"$event.event-type","rhsValue":"item-resume"},{"kind":"notMatch","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.lastQueueItemId","rhsValue":"$event.payload.queue-item-id"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4}]},{"kind":"match","lhsValue":"$queries.isSongPlaying","rhsValue":1}]}]},"key":"enqueueEventFlag","valueType":"number","value":1}]}]}},{"kind":"writeToDatabase","key":"lastEventTime","valueType":"number","value":"$event.event-time"},{"kind":"compound","predicate":{"kind":"isSome","value":"$event.payload.remote-control-options.kMRMediaRemoteOptionSiriSearchDataSetIdentifier"},"actions":[{"kind":"writeToDatabase","predicate":{"kind":"notMatch","lhsValue":"$queries.lastSearchQueryId","rhsValue":"$event.payload.remote-control-options.kMRMediaRemoteOptionSiriSearchDataSetIdentifier"},"key":"wasSearchQueryIdProcessed","valueType":"number","value":0},{"kind":"writeToDatabase","key":"lastSearchQueryId","valueType":"string","value":"$event.payload.remote-control-options.kMRMediaRemoteOptionSiriSearchDataSetIdentifier"}]},{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"remote-control-begin"},{"kind":"or","conditions":[{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":4},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":5},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":1},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":3},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":2},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":131},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":122},{"kind":"match","lhsValue":"$event.payload.remote-control-type","rhsValue":0}]}]},"actions":[{"kind":"writeToDatabase","key":"lastRemoteControlType","valueType":"number","value":"$event.payload.remote-control-type"}]},{"kind":"lintEvent","rules":[{"kind":"time","fields":["event-time"],"precision":86400000}]}]},{"name":"Voice Search PAF Event Creator","description":"Pipeline for creaing Voice Search PAF events from EVS data","filter":{"event-type":"(item-resume)|(item-end)|(item-pause)|(item-position-jump)|(remote-control-begin)|(application-termination)"},"queries":{"enqueueEventFlag":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"enqueueEventFlag"},"defaultValue":{"type":"number","value":0}},"lastRemoteControlType":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastRemoteControlType"},"defaultValue":{"type":"number","value":999}},"lastItemStartPosition":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastItemStartPosition"},"defaultValue":{"type":"number","value":0}},"lastQueueItemId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastQueueItemId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"isSongPlaying":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"isSongPlaying"},"defaultValue":{"type":"number","value":0}},"sessionId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"sessionId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"lastSearchQueryId":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastSearchQueryId"},"defaultValue":{"type":"string","value":"Invalid ID"}},"lastEventTime":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastEventTime"},"defaultValue":{"type":"number","value":0}},"newSessionId":{"type":"dynamic","action":{"kind":"idGenerator"}},"wasSearchQueryIdProcessed":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"wasSearchQueryIdProcessed"},"defaultValue":{"type":"number","value":0}},"wasLastPlaySiriInitiated":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"wasLastPlaySiriInitiated"},"defaultValue":{"type":"number","value":0}},"lastItemTotalPlayDuration":{"type":"dynamic","action":{"kind":"readFromDatabase","key":"lastItemTotalPlayDuration"},"defaultValue":{"type":"number","value":0}},"inactivityTimeout":{"type":"dynamic","action":{"kind":"readFromBag","key":"$groupConfig.inactivityTimeoutBagKey","type":"integer"},"defaultValue":{"type":"number","value":1800000}},"siriABTreatmentData":{"type":"dynamic","action":{"kind":"readTreatmentByAreaId","areaId":"L3TIy7c"},"defaultValue":{"type":"string","value":"None"}}},"dynamicReferences":{"durationToMilliseconds":{"kind":"computeNumber","operation":"multiplication","operands":["$event.media-duration-in-seconds",1000]},"addPlayDurationToTotal":{"kind":"computeNumber","operation":"addition","operands":["$queries.lastItemTotalPlayDuration","$event.play-duration-in-seconds"]}},"actions":[{"kind":"compound","predicate":{"kind":"match","lhsValue":"$queries.enqueueEventFlag","rhsValue":1},"actions":[{"kind":"updateField","key":"source-type","valueType":"number","value":"0"},{"kind":"addField","key":"container-type","valueType":"number","value":0},{"kind":"addField","key":"type","valueType":"number","value":0},{"kind":"updateField","key":"item-end-position","valueType":"number","value":0},{"kind":"updateField","key":"item-start-position","valueType":"number","value":0},{"kind":"updateField","key":"ab2-data","valueType":"string","value":"None"},{"kind":"updateField","key":"search-query-id","valueType":"string","value":"$queries.lastSearchQueryId"},{"kind":"writeToDatabase","key":"wasSearchQueryIdProcessed","valueType":"number","value":1},{"kind":"lintEvent","rules":[{"kind":"userId","fields":["user-id"],"key":"userId","namespace":"$groupConfig.bagNamespace","crossDeviceSync":true}]},{"kind":"updateField","key":"session-id","valueType":"string","value":"$queries.sessionId"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.account.payload.account-metadata.store-front-id"},"key":"store-front","valueType":"string","value":"$event.related-events.account.payload.account-metadata.store-front-id"},{"kind":"updateField","key":"build-version","valueType":"string","value":"$event.related-events.device.payload.device-metadata.user-agent"},{"kind":"updateField","key":"ab2-data","valueType":"string","value":"$queries.siriABTreatmentData"},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"isSome","value":"$event.related-events.queue-add.payload.queue-reporting-metadata.reco-data"},{"kind":"notMatch","lhsValue":"$event.related-events.queue-add.payload.queue-reporting-metadata.reco-data","rhsValue":""}]},"key":"reco-data","valueType":"string","value":"$event.related-events.queue-add.payload.queue-reporting-metadata.reco-data"},{"kind":"conditional","ifPredicate":{"kind":"match","lhsValue":"$event.related-events.account.payload.account-metadata.subscription-status.music.status","rhsValue":"Enabled"},"thenAction":{"kind":"updateField","key":"sb-enabled","valueType":"boolean","value":true},"elseAction":{"kind":"updateField","key":"sb-enabled","valueType":"boolean","value":false}},{"kind":"updateField","predicate":{"kind":"identity","value":"sb-enabled"},"key":"sb-type","valueType":"string","value":"$event.related-events.account.payload.account-metadata.subscription-status.music.reason"},{"kind":"updateField","key":"sb-trial","valueType":"boolean","value":false},{"kind":"updateField","predicate":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$event.related-events.account.payload.account-metadata.subscription-status.music.isInFreeTrial","rhsValue":true},{"kind":"match","lhsValue":"$event.related-events.account.payload.account-metadata.subscription-status.music.isInFreePeriod","rhsValue":true}]},"key":"sb-trial","valueType":"boolean","value":true},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelRadioStation"},"actions":[{"kind":"updateField","key":"container-type","valueType":"number","value":1},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.radio.station-hash"},"key":"container-ids.station-hash","valueType":"string","value":"$event.related-events.container-begin.payload.container-ids.radio.station-hash"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.radio.station-id"},"key":"container-ids.station-personalized-id","valueType":"number","value":"$event.related-events.container-begin.payload.container-ids.radio.station-id"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.radio.station-string"},"key":"container-ids.station-id","valueType":"string","value":"$event.related-events.container-begin.payload.container-ids.radio.station-string"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},"key":"ids.radio-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},{"kind":"updateField","predicate":{"kind":"isNothing","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},"key":"ids.radio-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"}]},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelPlaylist"},"actions":[{"kind":"updateField","key":"container-type","valueType":"number","value":2},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.universal.global-playlist"},"key":"container-ids.global-playlist-id","valueType":"string","value":"$event.related-events.container-begin.payload.container-ids.universal.global-playlist"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-metadata.container-playlist-version-hash"},"key":"container-ids.playlist-version-hash","valueType":"string","value":"$event.related-events.container-begin.payload.container-metadata.container-playlist-version-hash"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.personal.cloud"},"key":"container-ids.cloud-playlist-id","valueType":"number","value":"$event.related-events.container-begin.payload.container-ids.personal.cloud"}]},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelAlbum"},"actions":[{"kind":"updateField","key":"container-type","valueType":"number","value":3},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.universal.adam"},"key":"container-ids.album-adam-id","valueType":"number","value":"$event.related-events.container-begin.payload.container-ids.universal.adam"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.personal.cloud-album"},"key":"container-ids.cloud-album-id","valueType":"string","value":"$event.related-events.container-begin.payload.container-ids.personal.cloud-album"}]},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelArtist"},"actions":[{"kind":"updateField","key":"container-type","valueType":"number","value":4},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.container-begin.payload.container-ids.universal.adam"},"key":"container-ids.artist-adam-id","valueType":"number","value":"$event.related-events.container-begin.payload.container-ids.universal.adam"}]},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelRadioStation"},{"kind":"or","conditions":[{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"}]}]},"key":"type","valueType":"number","value":1},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"not","value":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelRadioStation"}},{"kind":"or","conditions":[{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"},{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.purchased"},{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.reporting-adam-id"}]}]},"key":"type","valueType":"number","value":1},{"kind":"updateField","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelMovie"},"key":"type","valueType":"number","value":10},{"kind":"updateField","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelTVEpisode"},"key":"type","valueType":"number","value":11},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.item-begin.payload.item-metadata.item-artist-uploaded","rhsValue":true},"actions":[{"kind":"updateField","key":"type","valueType":"number","value":8},{"kind":"updateField","key":"ids.auc-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"}]},{"kind":"updateField","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4},"key":"type","valueType":"number","value":4},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelRadioStation"},"actions":[{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},"key":"ids.radio-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},{"kind":"updateField","predicate":{"kind":"isNothing","value":"$event.related-events.item-begin.payload.item-ids.universal.adam"},"key":"ids.radio-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"}]},{"kind":"compound","predicate":{"kind":"not","value":{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-kind.modelClass","rhsValue":"MPModelRadioStation"}},"actions":[{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"},"key":"ids.subscription-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.subscription"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.purchased"},"key":"ids.purchased-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.purchased"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.personal.cloud"},"key":"ids.cloud-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.personal.cloud"},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-ids.universal.reporting-adam-id"},"key":"ids.reporting-adam-id","valueType":"number","value":"$event.related-events.item-begin.payload.item-ids.universal.reporting-adam-id"}]},{"kind":"updateField","key":"end-reason-type","valueType":"number","value":1},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4}]},"key":"end-reason-type","valueType":"number","value":0},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":4},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"}]},"key":"end-reason-type","valueType":"number","value":2},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":5},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"}]},"key":"end-reason-type","valueType":"number","value":14},{"kind":"updateField","predicate":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":1},{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":3},{"kind":"and","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":2},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-pause"}]}]},"key":"end-reason-type","valueType":"number","value":3},{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-pause"},{"kind":"isSome","value":"$event.payload.item-rate-change-reason"},{"kind":"match","lhsValue":"$event.payload.item-rate-change-reason","rhsValue":"begin interruption"}]},"actions":[{"kind":"updateField","key":"end-reason-type","valueType":"number","value":4}]},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":131},{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":122}]}]},"key":"end-reason-type","valueType":"number","value":5},{"kind":"updateField","predicate":{"kind":"and","conditions":[{"kind":"not","value":{"kind":"or","conditions":[{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":131},{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":4},{"kind":"match","lhsValue":"$queries.lastRemoteControlType","rhsValue":5}]}},{"kind":"match","lhsValue":"$event.payload.item-did-play-to-end","rhsValue":true}]},"key":"end-reason-type","valueType":"number","value":7},{"kind":"updateField","predicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},"key":"end-reason-type","valueType":"number","value":12},{"kind":"updateField","predicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"application-termination"},"key":"end-reason-type","valueType":"number","value":17},{"kind":"conditional","ifPredicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},"thenAction":{"kind":"compound","actions":[{"kind":"writeToDatabase","key":"lastItemStartPosition","valueType":"number","value":"$event.payload.item-start-position"},{"kind":"writeToDatabase","key":"lastQueueItemId","valueType":"string","value":"$event.payload.queue-item-id"},{"kind":"writeToDatabase","key":"isSongPlaying","valueType":"number","value":1}]},"elseAction":{"kind":"compound","actions":[{"kind":"updateField","key":"item-start-position","valueType":"number","value":"$queries.lastItemStartPosition"},{"kind":"updateField","key":"item-end-position","valueType":"number","value":"$event.payload.item-end-position"},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-position-jump"},"actions":[{"kind":"writeToDatabase","key":"lastItemStartPosition","valueType":"number","value":"$event.payload.item-end-position"},{"kind":"updateField","key":"item-end-position","valueType":"number","value":"$event.payload.item-start-position"},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$queries.isSongPlaying","rhsValue":0},"actions":[{"kind":"updateField","key":"item-start-position","valueType":"number","value":0},{"kind":"updateField","key":"item-end-position","valueType":"number","value":0}]}]},{"kind":"writeToDatabase","predicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},"key":"lastQueueItemId","valueType":"string","value":"Invalid ID"},{"kind":"writeToDatabase","predicate":{"kind":"or","conditions":[{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},{"kind":"or","conditions":[{"kind":"notMatch","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4},{"kind":"notMatch","lhsValue":"$event.end-reason-type","rhsValue":0}]}]},{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-pause"}]},"key":"isSongPlaying","valueType":"number","value":0}]}},{"kind":"compound","predicate":{"kind":"isSome","value":"$event.related-events.item-begin.payload.item-metadata.item-duration"},"actions":[{"kind":"updateField","key":"media-duration-in-seconds","valueType":"number","value":"$event.related-events.item-begin.payload.item-metadata.item-duration"},{"kind":"updateField","predicate":{"kind":"greaterThan","lhsValue":"$event.item-end-position","rhsValue":"$event.media-duration-in-seconds"},"key":"item-end-position","valueType":"number","value":"$event.media-duration-in-seconds"}]},{"kind":"compound","predicate":{"kind":"isNothing","value":"$event.related-events.item-begin.payload.item-metadata.item-duration"},"actions":[{"kind":"updateField","key":"media-duration-in-seconds","valueType":"number","value":0}]},{"kind":"updateField","predicate":{"kind":"isSome","value":"$event.media-duration-in-seconds"},"key":"media-duration-in-milliseconds","valueType":"number","value":"$dynamicReferences.durationToMilliseconds"},{"kind":"compound","predicate":{"kind":"isSome","value":"$event.media-duration-in-milliseconds"},"actions":[{"kind":"round","key":"media-duration-in-milliseconds","truncate":true}]},{"kind":"lintEvent","rules":[{"kind":"calculation","operation":"subtraction","operationFields":["item-end-position","item-start-position"],"fields":["play-duration-in-seconds"]}]},{"kind":"round","key":"play-duration-in-seconds"},{"kind":"compound","predicate":{"kind":"match","lhsValue":"$event.related-events.item-begin.payload.item-metadata.requires-mpaf","rhsValue":false},"actions":[{"kind":"lintEvent","rules":[{"kind":"denyFields","fields":["ids","ids.subscription-adam-id","ids.purchased-adam-id","ids.reporting-adam-id","ids.auc-adam-id","ids.cloud-id","ids.radio-adam-id","container-ids","container-ids.station-hash","container-ids.station-personalized-id","container-ids.station-id","container-ids.global-playlist-id","container-ids.playlist-version-hash","container-ids.cloud-playlist-id","container-ids.album-adam-id","container-ids.cloud-album-id","container-ids.artist-adam-id"]}]},{"kind":"updateField","key":"container-type","value":0,"valueType":"number"},{"kind":"updateField","predicate":{"kind":"notMatch","lhsValue":"$event.event-type","rhsValue":1},"key":"end-reason-type","value":0,"valueType":"number"},{"kind":"updateField","key":"type","value":9,"valueType":"number"}]},{"kind":"compound","predicate":{"kind":"and","conditions":[{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-end"},{"kind":"match","lhsValue":"$event.related-events.container-begin.payload.container-metadata.container-radio-type","rhsValue":4},{"kind":"match","lhsValue":"$event.end-reason-type","rhsValue":0}]},"actions":[{"kind":"updateField","key":"type","valueType":"number","value":7},{"kind":"writeToDatabase","key":"lastItemStartPosition","valueType":"number","value":"$event.payload.item-end-position"}]},{"kind":"conditional","ifPredicate":{"kind":"match","lhsValue":"$event.event-type","rhsValue":"item-resume"},"thenAction":{"kind":"compound","actions":[{"kind":"removeField","key":"play-duration-in-seconds"},{"kind":"removeField","key":"end-reason-type"},{"kind":"updateField","key":"event-type","valueType":"number","value":1}]},"elseAction":{"kind":"compound","actions":[{"kind":"updateField","key":"event-type","valueType":"number","value":0},{"kind":"writeToDatabase","key":"lastItemTotalPlayDuration","valueType":"number","value":"$dynamicReferences.addPlayDurationToTotal"}]}},{"kind":"lintEvent","rules":[{"kind":"allowFields","fields":["event-type","event-time","search-query-id","store-front","build-version","source-type","user-id","session-id","ab2-data","reco-data","sb-enabled","sb-type","sb-trial","container-type","container-ids","container-ids.station-hash","container-ids.station-personalized-id","container-ids.station-id","container-ids.global-playlist-id","container-ids.playlist-version-hash","container-ids.cloud-playlist-id","container-ids.album-adam-id","container-ids.cloud-album-id","container-ids.artist-adam-id","ids","ids.subscription-adam-id","ids.purchased-adam-id","ids.reporting-adam-id","ids.auc-adam-id","ids.cloud-id","ids.radio-adam-id","type","end-reason-type","media-duration-in-milliseconds","play-duration-in-seconds"]}]},{"kind":"enqueueEvent","topic":"$groupConfig.enqueueTopic"}]}]}]}],"backlogSizeLimit":50000000}
