(function(){return function(e,n){var r=Scanner.fromMessage(e);r.setLocale("en_US");for(var t=r.getSpan(),o=[],a=[],p=[],i=e.plain.split(/Pick-Up/i).length-1,c=(e.plain.slice(),0);c<i;c++)(t=t.next(/(^Car Rental[\s\S]*?)(?:^Flight [A-Z]|^Hotel$|^Car Rental$|^Plan)/gm)).isNullSpan_||p.push(t.toString());return 0===p.length?CONTINUE:(p.forEach(function(e){var t,o,p,i,c,s,l,h,d,f,m,u,g,v,k,T,y,U,C="Confirmed",N=r.getDetachedSpan(e),R=e.slice();e=e.split("\n");(y=/Company.*\n.*\n(.*)\n/.exec(R))&&2===y.length&&(y=y[1]),(c=/Pick-Up At.*\n.*\n(.*)\n/.exec(R))&&2===c.length&&(c=y+", "+c[1]),d=(d=/Drop-off At.*\n.*\n([^0-9]*\(.+\))\n/.exec(R))&&2===d.length?y+", "+d[1]:c,o=N.nextDate(),s=N.nextDate().nextDate(),(t=/Confirmation #.*\n.*\n(.*)\n/.exec(R))&&2===t.length&&(t=t[1]),(U=/Vehicle Type.*\n.*\n(.*)\n/.exec(R))&&2===U.length&&(U=U[1]),(f=/Rate.*\n.*\n([\d,.]+)\s*([A-Z]{2,3})/.exec(R))&&3===f.length&&(m=f[1],u=f[2]),a.push({reservationId:t,pickupTime:o,pickupName:p,pickupTelephone:i,pickupAddress:c,dropoffTime:s,dropoffName:l,dropoffTelephone:h,dropoffAddress:d,totalPrice:m,priceCurrency:u,reservationStatus:C,checkinUrl:g,modifyReservationUrl:v,cancelReservationUrl:k,underName:T,brand:U,provider:y,underPersonName:n.underName})}),a.forEach(function(e){ASSERT(e.pickupTime,e.pickupAddress,e.dropoffTime,e.dropoffAddress),o.push({"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationId:e.reservationId,totalPrice:e.totalPrice,priceCurrency:e.priceCurrency,reservationStatus:"http://schema.org/"+e.reservationStatus,checkinUrl:e.checkinUrl,modifyReservationUrl:e.modifyReservationUrl,cancelReservationUrl:e.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:e.underName},provider:{"@type":"http://schema.org/Organization",name:e.provider},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:e.brand},license:"",color:""},pickupTime:e.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:e.pickupAddress,telephone:e.pickupTelephone},dropoffTime:e.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:e.dropoffAddress,telephone:e.dropoffTelephone}})}),o.length>=1?o:CONTINUE)}}).call();