(function(){return function(e,r,l,t,a,i){if(!isSplashScreenAcknowledged()&&!fromSuggestTool)return CONTINUE;if(e.html=e.html.replace(/<td.+?:line-through.+?<\/td/g,""),e.plain=e.plain.replace(/[\uff0f\uff1a]/g," "),!(r||(r=loadHelper("generic_common.js")(e,"flight"))&&r!==STOP))return STOP;var n=r[0],o=(a=r[1],t=r[2],[]);if(!l){if((!(l=loadHelper("flight_references.js")(a,t,e))||0===l.length||l.length>=20)&&"Cancelled"!==n)return CONTINUE;if(l.length>0&&(l=loadHelper("flight_dates.js")(l)),(!l||0===l.length)&&"Cancelled"!==n)return CONTINUE}if(l.length>0){var d=!1;if(l.forEach(function(r){var l=loadHelper("legs_for_flight_information.js")(r,o,e.senderDomain,a);if(l){var t=o[o.length-1],i=l[0];t&&i&&t.arrivalActualTime>i.departureActualTime&&(r.departureDate=modifyDate(r.departureDate,1),!/T\d{2}:/.test(r.departureDate)&&i.departureActualTime.split("T")[1]&&(r.departureDate=r.departureDate+"T"+i.departureActualTime.split("T")[1]),l=loadHelper("legs_for_flight_information.js")(r,o,e.senderDomain,a)),o=o.concat(l)}else d=!0}),d)return CONTINUE;ASSERT({sg_validate:o,sg_description:"flightLegs"})}var s=loadHelper("flight_reservation_id_domain_whitelist.js");if(i||(i=s.includes(e.domain)&&"Cancelled"===n?loadHelper("reservationid.js")(a,t,e.subject,e.url):loadHelper("get_flight_reservation_id.js")(t,e,a,l)),i.isNullSpan_&&"Cancelled"===n)return CONTINUE;for(var f in i=i?loadHelper("modify_reservation_id_for_domain.js")(e,i,n,"flight"):i,o)i.toString().toLowerCase().includes(o[f].carrierCode+o[f].flightNumber)&&delete o[f];var g=loadHelper("flight_checkIn.js")(t,e);return loadHelper("schemas_for_legs.js")(o,i,g,n,e.documentType)}}).call();